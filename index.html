<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Red Intercultural Juvenil - RIJ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="assets/data.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;500;600;700;800;900&display=swap');
        
        :root {
            --color-primary: #ff6b35;
            --color-secondary: #004e89;
            --color-accent: #f7b801;
            --color-verde: #2a9d8f;
            --color-morado: #6a4c93;
        }

        * {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Work Sans', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3 {
            font-family: 'Work Sans', sans-serif;
            font-weight: 900;
        }

        /* Animaci√≥n sutil al cargar */
        .fade-in {
            animation: fadeIn 1s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Patr√≥n jaguar para el directorio */
        .jaguar-pattern {
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0,0,0,0.15) 2%, transparent 3%),
                radial-gradient(circle at 60% 50%, rgba(0,0,0,0.1) 3%, transparent 4%),
                radial-gradient(circle at 35% 70%, rgba(0,0,0,0.12) 2.5%, transparent 3.5%),
                radial-gradient(circle at 80% 20%, rgba(0,0,0,0.08) 2%, transparent 3%),
                radial-gradient(circle at 15% 85%, rgba(0,0,0,0.1) 2.8%, transparent 3.8%);
            background-size: 100px 100px;
            background-color: #f7e7ce;
        }

        /* Secciones con altura completa */
        section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 3rem 1rem;
            position: relative;
        }

        @media (min-width: 768px) {
            section {
                padding: 4rem 2rem;
            }
        }

        /* Mapa interactivo */
        #map {
            height: 400px;
            width: 100%;
            border-radius: 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        @media (min-width: 768px) {
            #map {
                height: 500px;
            }
        }

        @media (min-width: 1024px) {
            #map {
                height: 600px;
            }
        }

        /* Card de organizaci√≥n en mapa */
        .org-popup {
            min-width: 240px;
            max-width: 280px;
            text-align: center;
        }

        .org-popup img {
            max-width: 80px;
            max-height: 80px;
            object-fit: contain;
            display: block;
            margin: 0 auto 10px;
            background: white;
            padding: 8px;
            border-radius: 8px;
        }

        @media (min-width: 640px) {
            .org-popup {
                min-width: 280px;
            }
            .org-popup img {
                max-width: 100px;
                max-height: 100px;
            }
        }

        /* Carrusel de aforismos */
        .carousel-container {
            overflow: hidden;
            position: relative;
        }

        .carousel-track {
            display: flex;
            animation: scroll 30s linear infinite;
        }

        .carousel-item {
            min-width: 250px;
            margin: 0 0.5rem;
            padding: 1.5rem;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        @media (min-width: 640px) {
            .carousel-item {
                min-width: 300px;
                margin: 0 1rem;
                padding: 2rem;
            }
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* Tarjetas de directorio */
        .org-card {
            background: white;
            border-radius: 15px;
            padding: 1rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 640px) {
            .org-card {
                padding: 1.5rem;
                border-radius: 20px;
            }
        }

        .org-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        }

        .org-logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin: 0 auto 0.75rem;
            display: block;
            background: white;
            padding: 8px;
            border-radius: 8px;
        }

        @media (min-width: 640px) {
            .org-logo {
                width: 100px;
                height: 100px;
                padding: 10px;
                margin: 0 auto 1rem;
            }
        }

        @media (min-width: 1024px) {
            .org-logo {
                width: 120px;
                height: 120px;
            }
        }

        /* Navegaci√≥n flotante */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav a {
            transition: color 0.3s ease;
        }

        nav a:hover {
            color: var(--color-primary);
        }

        /* Logo RIJ en nav */
        nav .text-3xl {
            line-height: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* Fondo de fotos aleatorias en inicio */
        #inicio {
            position: relative;
            overflow: hidden;
        }

        #inicio::before,
        #inicio::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: opacity 3s ease-in-out;
        }

        #inicio::before {
            z-index: 0;
        }

        #inicio::after {
            z-index: 1;
        }

        #inicio > div {
            position: relative;
            z-index: 2;
        }

        /* Hacer slideshow clicable */
        #inicio {
            cursor: pointer;
        }

        /* Estilos para galer√≠a */
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 15px;
            height: 300px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .gallery-item:hover {
            transform: scale(1.05);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-item .caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            color: white;
            padding: 1rem;
            font-size: 0.875rem;
            font-weight: 600;
        }

        /* Responsive helpers */
        @media (max-width: 639px) {
            h1 {
                font-size: 2.5rem !important;
                line-height: 1.2;
            }
            h2 {
                font-size: 1.75rem !important;
            }
            .text-6xl {
                font-size: 2.5rem !important;
            }
            .text-8xl {
                font-size: 3rem !important;
            }
        }

        /* Mejorar legibilidad en m√≥viles */
        @media (max-width: 767px) {
            body {
                font-size: 0.9rem;
            }
        }

        /* Orientaci√≥n horizontal en m√≥viles */
        @media (max-width: 896px) and (max-height: 414px) and (orientation: landscape) {
            section {
                min-height: auto;
                padding: 2rem 1rem;
            }
        }
    </style>
</head>
<body class="bg-white text-gray-900">

    <!-- Navegaci√≥n Fija -->
    <nav class="py-3">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <img src="assets/logos/RIJ_SIGLA.png" alt="Red Intercultural Juvenil" class="h-12 md:h-16">
                </div>
                <ul class="hidden md:flex space-x-6 text-sm font-medium">
                    <li><a href="#inicio" class="hover:text-orange-500">Inicio</a></li>
                    <li><a href="#aforismos" class="hover:text-orange-500">Aforismos</a></li>
                    <li><a href="#galeria" class="hover:text-orange-500">Galer√≠a</a></li>
                    <li><a href="#manifiesto" class="hover:text-orange-500">Manifiesto</a></li>
                    <li><a href="#mapa" class="hover:text-orange-500">Mapa</a></li>
                    <li><a href="#directorio" class="hover:text-orange-500">Directorio</a></li>
                    <li><a href="#articulaciones" class="hover:text-orange-500">Articulaciones</a></li>
                    <li><a href="#salvaguarda" class="hover:text-orange-500">Salvaguarda</a></li>
                    <li><a href="#envolvente" class="hover:text-orange-500">Envolvente</a></li>
                    <li><a href="#contacto" class="hover:text-orange-500">Contacto</a></li>
                </ul>
                <button id="menu-toggle" class="md:hidden">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- SECCI√ìN 1: T√çTULO RIJ -->
    <section id="inicio" class="bg-gradient-to-br from-gray-600 via-gray-500 to-gray-400 text-white pt-24 pb-16 relative">
        <div class="max-w-7xl mx-auto text-center fade-in">
            <div class="mb-2" style="margin-top: -80px;">
                <img src="assets/logos/RIJ_COMP_NEG.png" alt="Red Intercultural Juvenil" class="w-full drop-shadow-2xl">
            </div>
            <p class="text-2xl md:text-3xl font-light max-w-4xl mx-auto mb-12 px-4" style="margin-top: -60px; font-style: italic; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                Tejiendo identidades, fortaleciendo territorios
            </p>
            <div class="flex justify-center gap-6 flex-wrap px-4">
                <div class="bg-white/20 backdrop-blur px-8 py-4 rounded-full font-black text-lg md:text-xl" style="font-family: 'Work Sans', sans-serif;">27 Organizaciones</div>
                <div class="bg-white/20 backdrop-blur px-8 py-4 rounded-full font-black text-lg md:text-xl" style="font-family: 'Work Sans', sans-serif;">15 Departamentos</div>
                <div class="bg-white/20 backdrop-blur px-8 py-4 rounded-full font-black text-lg md:text-xl" style="font-family: 'Work Sans', sans-serif;">Una Red</div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 2: AFORISMOS (Carrusel) -->
    <section id="aforismos" class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Mensajes Fuerza</h2>
            <div class="carousel-container">
                <div class="carousel-track" id="carousel-track">
                    <!-- Los aforismos se cargar√°n din√°micamente aqu√≠ -->
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 3: GALER√çA -->
    <section id="galeria" class="bg-gray-50">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 text-gray-900">Galer√≠a Visual</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="gallery-grid">
                <!-- La galer√≠a se cargar√° din√°micamente aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 4: MANIFIESTO -->
    <section id="manifiesto" class="bg-gradient-to-br from-teal-500 to-green-600 text-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Manifiesto de la Red</h2>
            <div class="bg-white/10 backdrop-blur rounded-2xl p-8 md:p-12">
                <h3 class="text-2xl font-bold mb-6">Acuerdos √âticos</h3>
                <ul class="space-y-4 text-lg mb-8">
                    <li class="flex items-start gap-3">
                        <span class="text-2xl">‚úì</span>
                        <span>Respeto a la diversidad cultural y territorial</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-2xl">‚úì</span>
                        <span>Transparencia en la comunicaci√≥n y toma de decisiones</span>
                    </li>
                    <li class="flex items-start gap-3">
                        <span class="text-2xl">‚úì</span>
                        <span>Horizontalidad en las relaciones entre organizaciones</span>
                    </li>
                </ul>
                
                <h3 class="text-2xl font-bold mb-6">Metodolog√≠a de Toma de Decisiones</h3>
                <p class="text-lg mb-8">
                    La Red funciona bajo principios de consenso y di√°logo permanente, 
                    priorizando el bienestar colectivo y la sostenibilidad territorial.
                </p>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 5: MAPA DE TERRITORIALIZACI√ìN -->
    <section id="mapa" class="bg-blue-50">
        <div class="w-full">
            <div class="max-w-7xl mx-auto px-4 mb-8">
                <h2 class="text-4xl md:text-5xl font-bold text-center mb-6 text-gray-900">Mapa de Nodos</h2>
                <p class="text-center text-gray-600 max-w-2xl mx-auto">
                    Visualiza la presencia territorial de las organizaciones que conforman la Red Intercultural Juvenil
                </p>
            </div>
            <div id="map"></div>
        </div>
    </section>

    <!-- SECCI√ìN 6: DIRECTORIO DE ORGANIZACIONES -->
    <section id="directorio" class="jaguar-pattern">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12 text-gray-900">Directorio Vivo de Organizaciones</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6" id="directorio-grid">
                <!-- Las fichas se cargar√°n din√°micamente aqu√≠ -->
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 7: ARTICULACIONES -->
    <section id="articulaciones" class="bg-gradient-to-r from-amber-400 to-orange-500 text-white">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Articulaciones y Logros</h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="bg-white/10 backdrop-blur rounded-xl p-6">
                    <h3 class="text-2xl font-bold mb-4">Redam √ó Yucuta</h3>
                    <p>Colaboraci√≥n en proyectos de preservaci√≥n cultural amaz√≥nica</p>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-6">
                    <h3 class="text-2xl font-bold mb-4">Kombilesa Mi √ó ODEC</h3>
                    <p>Alianza para el fortalecimiento de identidades juveniles</p>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-6">
                    <h3 class="text-2xl font-bold mb-4">Bari Rock √ó La Tigra</h3>
                    <p>Fusi√≥n musical y cultural en territorios de frontera</p>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-6">
                    <h3 class="text-2xl font-bold mb-4">Biohoty √ó Enraizarte</h3>
                    <p>Intercambio de saberes ambientales y art√≠sticos</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 8: SALVAGUARDA -->
    <section id="salvaguarda" class="bg-gradient-to-br from-green-700 to-teal-800 text-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Cuando el Territorio Habla</h2>
            <div class="bg-white/10 backdrop-blur rounded-2xl p-8 md:p-12">
                <p class="text-lg leading-relaxed mb-6">
                    La salvaguarda no es solo un protocolo administrativo, es el compromiso de escuchar 
                    las voces ancestrales que habitan los territorios donde trabajamos.
                </p>
                <p class="text-lg leading-relaxed mb-6">
                    Reconocemos que cada organizaci√≥n es guardiana de saberes, tradiciones y cosmovisiones 
                    que merecen ser preservadas, transmitidas y celebradas.
                </p>
                <div class="border-l-4 border-white pl-6 italic">
                    <p class="text-xl">"El territorio no es un lugar, es una memoria viva que late en cada uno de nosotros"</p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 9: ENVOLVENTE -->
    <section id="envolvente" class="bg-gradient-to-r from-indigo-600 to-purple-700 text-white">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold text-center mb-12">Envolvente</h2>
            <div class="bg-white/10 backdrop-blur rounded-2xl p-8 md:p-12">
                <h3 class="text-2xl font-bold mb-6">Proceso de Integraci√≥n a la Red</h3>
                <div class="space-y-6">
                    <div class="flex items-start gap-4">
                        <div class="bg-white text-indigo-600 rounded-full w-10 h-10 flex items-center justify-center font-bold flex-shrink-0">1</div>
                        <div>
                            <h4 class="font-bold text-lg mb-2">Manifestaci√≥n de Inter√©s</h4>
                            <p>Las organizaciones expresan su deseo de formar parte de la red</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="bg-white text-indigo-600 rounded-full w-10 h-10 flex items-center justify-center font-bold flex-shrink-0">2</div>
                        <div>
                            <h4 class="font-bold text-lg mb-2">Caracterizaci√≥n</h4>
                            <p>Proceso de conocimiento mutuo y reconocimiento territorial</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-4">
                        <div class="bg-white text-indigo-600 rounded-full w-10 h-10 flex items-center justify-center font-bold flex-shrink-0">3</div>
                        <div>
                            <h4 class="font-bold text-lg mb-2">Formalizaci√≥n</h4>
                            <p>Acuerdos de colaboraci√≥n y participaci√≥n activa en la red</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCI√ìN 10: CONTACTO -->
    <section id="contacto" class="bg-gray-900 text-white">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl md:text-5xl font-bold mb-12">Contacto</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="bg-white/5 backdrop-blur rounded-xl p-8">
                    <h3 class="text-xl font-bold mb-4">Email</h3>
                    <a href="mailto:info@redinterculturaljuvenil.org" class="text-orange-400 hover:text-orange-300">
                        info@redinterculturaljuvenil.org
                    </a>
                </div>
                <div class="bg-white/5 backdrop-blur rounded-xl p-8">
                    <h3 class="text-xl font-bold mb-4">Redes Sociales</h3>
                    <div class="flex justify-center gap-4 text-3xl">
                        <a href="#" class="hover:text-orange-400">üì∑</a>
                        <a href="#" class="hover:text-orange-400">üìò</a>
                        <a href="#" class="hover:text-orange-400">üê¶</a>
                    </div>
                </div>
            </div>
            <p class="mt-12 text-gray-400 text-sm">
                ¬© 2026 Red Intercultural Juvenil - Todos los derechos reservados
            </p>
        </div>
    </section>

    <script>
        // Array de fotos de organizaciones (44 fotos totales)
        const fotosOrgs = [
            'assets/photos_orgs/01_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/01_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/02_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/02_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/03_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/03_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/04_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/04_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/05_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/05_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/06_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/06_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/07_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/07_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/08_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/08_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/09_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/09_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/10_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/10_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/11_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/11_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/12_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/12_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/13_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/13_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/14_CUMBRE_CASA_CULTURAL.jpg',
            'assets/photos_orgs/14_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/15_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/15_MALOKA_JOVEN_2025.jpg',
            'assets/photos_orgs/16_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/17_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/18_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/19_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/20_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/21_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/22_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/23_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/24_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/25_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/26_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/27_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/28_GUAQUE_SOPO_2025.jpg',
            'assets/photos_orgs/29_GUAQUE_SOPO_2025.jpg'
        ];

        // Sistema de shuffle sin repeticiones
        let shuffledPhotos = [];
        let currentShuffleIndex = 0;

        // Crear nuevo shuffle
        function createShuffle() {
            shuffledPhotos = [...fotosOrgs];
            // Algoritmo Fisher-Yates para mezclar
            for (let i = shuffledPhotos.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledPhotos[i], shuffledPhotos[j]] = [shuffledPhotos[j], shuffledPhotos[i]];
            }
            currentShuffleIndex = 0;
        }

        // Obtener siguiente foto del shuffle
        function getNextPhoto() {
            if (currentShuffleIndex >= shuffledPhotos.length) {
                createShuffle();
            }
            const photo = shuffledPhotos[currentShuffleIndex];
            currentShuffleIndex++;
            return photo;
        }

        // Mapeo de nombres de fotos a organizaciones
        function getOrgFromPhoto(photoPath) {
            const filename = photoPath.split('/').pop().toUpperCase();
            
            // Buscar organizaci√≥n por nombre en la foto
            if (filename.includes('CASA_CULTURAL')) {
                // Buscar Casa Cultural en las organizaciones
                return organizaciones.find(org => 
                    org.nombre && org.nombre.toLowerCase().includes('casa cultural')
                );
            } else if (filename.includes('MALOKA')) {
                return organizaciones.find(org => 
                    org.nombre && org.nombre.toLowerCase().includes('maloka')
                );
            } else if (filename.includes('GUAQUE') || filename.includes('SOPO')) {
                return organizaciones.find(org => 
                    org.nombre && (org.nombre.toLowerCase().includes('guaque') || org.municipio.toLowerCase().includes('sop√≥'))
                );
            }
            
            return null;
        }

        // Precarga de todas las im√°genes
        let imagesPreloaded = false;
        const preloadedImages = [];
        
        function preloadImages() {
            fotosOrgs.forEach((src) => {
                const img = new Image();
                img.src = src;
                preloadedImages.push(img);
            });
            imagesPreloaded = true;
        }

        // Funci√≥n para seleccionar foto con sistema de shuffle
        let currentPhotoPath = null;
        let useBeforeLayer = true;
        
        function setRandomBackground(fade = false) {
            const inicioSection = document.getElementById('inicio');
            const randomPhoto = getNextPhoto();
            currentPhotoPath = randomPhoto;
            
            // Crear elemento de estilo din√°mico si no existe
            const styleId = 'dynamic-bg-style';
            let styleEl = document.getElementById(styleId);
            if (!styleEl) {
                styleEl = document.createElement('style');
                styleEl.id = styleId;
                document.head.appendChild(styleEl);
            }
            
            if (fade && imagesPreloaded) {
                // Alternar entre ::before y ::after para el efecto crossfade
                if (useBeforeLayer) {
                    // Cambiar ::before, hacer fade de ::after
                    styleEl.textContent = `
                        #inicio::before { background-image: url('${randomPhoto}'); opacity: 1; }
                        #inicio::after { opacity: 0; }
                    `;
                } else {
                    // Cambiar ::after, hacer fade de ::before
                    styleEl.textContent = `
                        #inicio::after { background-image: url('${randomPhoto}'); opacity: 1; }
                        #inicio::before { opacity: 0; }
                    `;
                }
                useBeforeLayer = !useBeforeLayer;
            } else {
                // Primera carga sin fade
                styleEl.textContent = `
                    #inicio::before { background-image: url('${randomPhoto}'); opacity: 1; }
                    #inicio::after { opacity: 0; }
                `;
            }
        }

        // Cambiar foto cada 5 segundos
        function startPhotoRotation() {
            setInterval(() => {
                setRandomBackground(true);
            }, 5000);
        }

        // Inicializar mapa
        function initMap() {
            const map = L.map('map').setView([4.5709, -74.2973], 6); // Colombia centrada
            window.mapInstance = map; // Guardar referencia global
            
            // Usar un tile layer colorido y gratuito
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors',
                maxZoom: 18
            }).addTo(map);

            // Agregar marcadores de organizaciones
            organizaciones.forEach(org => {
                if (org.lat && org.lng) {
                    const marker = L.marker([org.lat, org.lng]).addTo(map);
                    
                    const socialLinks = [];
                    if (org.instagram) socialLinks.push(`<a href="${org.instagram}" target="_blank" class="hover:scale-110 transition">üì∑</a>`);
                    if (org.facebook) socialLinks.push(`<a href="${org.facebook}" target="_blank" class="hover:scale-110 transition">üìò</a>`);
                    if (org.tiktok) socialLinks.push(`<a href="${org.tiktok}" target="_blank" class="hover:scale-110 transition">üéµ</a>`);
                    if (org.youtube) socialLinks.push(`<a href="${org.youtube}" target="_blank" class="hover:scale-110 transition">üì∫</a>`);
                    if (org.twitter) socialLinks.push(`<a href="${org.twitter}" target="_blank" class="hover:scale-110 transition">üê¶</a>`);
                    
                    marker.bindPopup(`
                        <div class="org-popup">
                            ${org.logo ? `<img src="${org.logo}" alt="${org.nombre}" onerror="this.style.display='none'">` : ''}
                            <h3 class="font-bold text-lg mt-2">${org.nombre}</h3>
                            <p class="text-sm text-gray-600">${org.municipio}</p>
                            <p class="text-sm mt-2"><strong>Contacto:</strong> ${org.representante}</p>
                            <p class="text-sm">${org.email}</p>
                            <p class="text-sm">${org.telefono}</p>
                            ${socialLinks.length > 0 ? `<div class="flex gap-2 mt-2 text-xl">${socialLinks.join('')}</div>` : ''}
                        </div>
                    `);
                }
            });
        }

        // Cargar galer√≠a
        function loadGallery() {
            const grid = document.getElementById('gallery-grid');
            
            grid.innerHTML = fotosOrgs.map((foto, index) => `
                <div class="gallery-item" onclick="goToMapFromGallery('${foto}')">
                    <img src="${foto}" alt="Foto ${index + 1}" loading="lazy">
                    <div class="caption">${getOrgNameFromPhoto(foto)}</div>
                </div>
            `).join('');
        }

        // Extraer nombre de organizaci√≥n de la foto
        function getOrgNameFromPhoto(photoPath) {
            const filename = photoPath.split('/').pop();
            if (filename.includes('CUMBRE_CASA_CULTURAL')) {
                return 'Cumbre Casa Cultural';
            } else if (filename.includes('GUAQUE_SOPO')) {
                return 'Guaque Sop√≥ 2025';
            }
            return 'Red Intercultural Juvenil';
        }

        // Navegar al mapa desde galer√≠a o slideshow
        function goToMapFromGallery(photoPath) {
            const org = getOrgFromPhoto(photoPath);
            
            // Navegar a la secci√≥n del mapa
            window.location.hash = '#mapa';
            
            // Scroll suave al mapa
            setTimeout(() => {
                document.getElementById('mapa').scrollIntoView({ behavior: 'smooth' });
                
                // Si encontramos la organizaci√≥n, abrir su popup en el mapa
                if (org && org.lat && org.lng) {
                    setTimeout(() => {
                        // Buscar el marcador correspondiente y hacer zoom
                        if (window.mapInstance) {
                            window.mapInstance.setView([org.lat, org.lng], 12);
                        }
                    }, 500);
                }
            }, 100);
        }

        // Hacer slideshow clicable
        function makeSlideShowClickable() {
            const inicioSection = document.getElementById('inicio');
            inicioSection.style.cursor = 'pointer';
            
            inicioSection.addEventListener('click', (e) => {
                // Solo si se hace clic en el fondo, no en el contenido
                if (e.target === inicioSection || e.target.tagName === 'SECTION') {
                    if (currentPhotoPath) {
                        goToMapFromGallery(currentPhotoPath);
                    }
                }
            });
        }
        function loadAforismos() {
            const track = document.getElementById('carousel-track');
            
            // Duplicar para efecto infinito
            const allAforismos = [...aforismos, ...aforismos];
            
            track.innerHTML = allAforismos.map(frase => `
                <div class="carousel-item">
                    <p class="text-xl font-semibold text-gray-800 italic">"${frase}"</p>
                </div>
            `).join('');
        }

        // Cargar directorio
        function loadDirectorio() {
            const grid = document.getElementById('directorio-grid');
            
            grid.innerHTML = organizaciones.map(org => {
                const socialLinks = [];
                if (org.instagram) socialLinks.push(`<a href="${org.instagram}" target="_blank" class="hover:scale-110 transition">üì∑</a>`);
                if (org.facebook) socialLinks.push(`<a href="${org.facebook}" target="_blank" class="hover:scale-110 transition">üìò</a>`);
                if (org.tiktok) socialLinks.push(`<a href="${org.tiktok}" target="_blank" class="hover:scale-110 transition">üéµ</a>`);
                if (org.youtube) socialLinks.push(`<a href="${org.youtube}" target="_blank" class="hover:scale-110 transition">üì∫</a>`);
                if (org.twitter) socialLinks.push(`<a href="${org.twitter}" target="_blank" class="hover:scale-110 transition">üê¶</a>`);
                
                return `
                <div class="org-card">
                    ${org.logo ? `<img src="${org.logo}" alt="${org.nombre}" class="org-logo" onerror="this.style.display='none'">` : '<div class="org-logo bg-gray-200 rounded-full flex items-center justify-center text-2xl">üé®</div>'}
                    <h3 class="font-bold text-lg text-center mb-2">${org.nombre}</h3>
                    <p class="text-sm text-gray-600 text-center mb-3">${org.municipio}</p>
                    ${org.lema ? `<p class="text-xs italic text-center text-gray-500 mb-3">"${org.lema}"</p>` : ''}
                    <div class="text-xs text-gray-500 space-y-1">
                        <p><strong>Contacto:</strong> ${org.representante}</p>
                        <p class="truncate" title="${org.email}">${org.email}</p>
                        <p>${org.telefono}</p>
                        <p class="text-blue-600 font-semibold">${org.beneficiarios} beneficiarios</p>
                    </div>
                    ${socialLinks.length > 0 ? `<div class="flex justify-center gap-3 mt-4 text-xl">${socialLinks.join('')}</div>` : ''}
                </div>
            `}).join('');
        }

        // Menu m√≥vil
        document.addEventListener('DOMContentLoaded', function() {
            // Toggle men√∫ m√≥vil
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.createElement('div');
            mobileMenu.className = 'hidden md:hidden absolute top-full left-0 right-0 bg-white shadow-lg py-4';
            mobileMenu.innerHTML = `
                <ul class="flex flex-col space-y-2 px-4">
                    <li><a href="#inicio" class="block py-2 hover:text-orange-500">Inicio</a></li>
                    <li><a href="#aforismos" class="block py-2 hover:text-orange-500">Aforismos</a></li>
                    <li><a href="#galeria" class="block py-2 hover:text-orange-500">Galer√≠a</a></li>
                    <li><a href="#manifiesto" class="block py-2 hover:text-orange-500">Manifiesto</a></li>
                    <li><a href="#mapa" class="block py-2 hover:text-orange-500">Mapa</a></li>
                    <li><a href="#directorio" class="block py-2 hover:text-orange-500">Directorio</a></li>
                    <li><a href="#articulaciones" class="block py-2 hover:text-orange-500">Articulaciones</a></li>
                    <li><a href="#salvaguarda" class="block py-2 hover:text-orange-500">Salvaguarda</a></li>
                    <li><a href="#envolvente" class="block py-2 hover:text-orange-500">Envolvente</a></li>
                    <li><a href="#contacto" class="block py-2 hover:text-orange-500">Contacto</a></li>
                </ul>
            `;
            
            menuToggle.parentElement.appendChild(mobileMenu);
            
            menuToggle.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
            
            // Cerrar men√∫ al hacer clic en un enlace
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            });
            
            // Inicializar todo
            createShuffle();
            preloadImages();
            setRandomBackground();
            startPhotoRotation();
            makeSlideShowClickable();
            loadAforismos();
            loadGallery();
            loadDirectorio();
            initMap();
        });
    </script>
</body>
</html>
